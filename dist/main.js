(()=>{var e,t,n,r,a={},o={};function i(e){var t=o[e];if(void 0!==t)return t.exports;var n=o[e]={exports:{}};return a[e](n,n.exports,i),n.exports}i.m=a,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,i.t=function(n,r){if(1&r&&(n=this(n)),8&r)return n;if("object"==typeof n&&n){if(4&r&&n.__esModule)return n;if(16&r&&"function"==typeof n.then)return n}var a=Object.create(null);i.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var c=2&r&&n;"object"==typeof c&&!~e.indexOf(c);c=t(c))Object.getOwnPropertyNames(c).forEach((e=>o[e]=()=>n[e]));return o.default=()=>n,i.d(a,o),a},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.f={},i.e=e=>Promise.all(Object.keys(i.f).reduce(((t,n)=>(i.f[n](e,t),t)),[])),i.u=e=>e+".js",i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n={},r="language-parser:",i.l=(e,t,a,o)=>{if(n[e])n[e].push(t);else{var c,s;if(void 0!==a)for(var l=document.getElementsByTagName("script"),d=0;d<l.length;d++){var u=l[d];if(u.getAttribute("src")==e||u.getAttribute("data-webpack")==r+a){c=u;break}}c||(s=!0,(c=document.createElement("script")).charset="utf-8",c.timeout=120,i.nc&&c.setAttribute("nonce",i.nc),c.setAttribute("data-webpack",r+a),c.src=e),n[e]=[t];var p=(t,r)=>{c.onerror=c.onload=null,clearTimeout(m);var a=n[e];if(delete n[e],c.parentNode&&c.parentNode.removeChild(c),a&&a.forEach((e=>e(r))),t)return t(r)},m=setTimeout(p.bind(null,void 0,{type:"timeout",target:c}),12e4);c.onerror=p.bind(null,c.onerror),c.onload=p.bind(null,c.onload),s&&document.head.appendChild(c)}},i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;i.g.importScripts&&(e=i.g.location+"");var t=i.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");n.length&&(e=n[n.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=e})(),(()=>{var e={179:0};i.f.j=(t,n)=>{var r=i.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var a=new Promise(((n,a)=>r=e[t]=[n,a]));n.push(r[2]=a);var o=i.p+i.u(t),c=new Error;i.l(o,(n=>{if(i.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var a=n&&("load"===n.type?"missing":n.type),o=n&&n.target&&n.target.src;c.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",c.name="ChunkLoadError",c.type=a,c.request=o,r[1](c)}}),"chunk-"+t,t)}};var t=(t,n)=>{var r,a,[o,c,s]=n,l=0;if(o.some((t=>0!==e[t]))){for(r in c)i.o(c,r)&&(i.m[r]=c[r]);s&&s(i)}for(t&&t(n);l<o.length;l++)a=o[l],i.o(e,a)&&e[a]&&e[a][0](),e[a]=0},n=self.webpackChunklanguage_parser=self.webpackChunklanguage_parser||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();const c=()=>i.e(19).then(i.t.bind(i,19,19)),s=document.querySelector(".input-container"),l=document.querySelector(".output-container"),d=document.querySelector("#clear-all-btn"),u=document.querySelector("#view-original-btn"),p=document.querySelector("#input-field"),m=document.querySelector(".count-value"),f=document.querySelector("#submit-btn"),h=document.querySelector(".loader"),y=document.querySelector("#download-btn"),v=document.querySelector(".plural"),g=document.querySelector("#display-field");let b,E=document.querySelector("#display-content");const L=document.querySelector("#display-pinyin"),k=document.querySelector("#pinyin-slider"),w=document.querySelector("#color-coding"),x=document.querySelector("#color-coding-slider");let C=[],S={};const q=[1,2,3,0,1,2];let $=0,A=!0;function j(){const e=Math.floor(3*Math.random()),t=q[$+e];return $=t,t}function N(e,t){return t.includes(`(${e})`)||t.includes(`(${e}, `)||t.includes(`, ${e}, `)||t.includes(`, ${e})`)}function O(){const e=document.createElement("span");return e.classList.add("definition-term"),e.addEventListener("click",(()=>{var t;(t=e).parentElement.classList.contains("word-container")?t.parentElement.remove():t.remove()})),e}function P(e,t){t.textContent=`${t.textContent.slice(0,-1)}, ${e})`}function T(e,t){const n=document.createElement("span");return n.textContent=e.value,n.classList.add("word-span"),n.classList.add("no-background-span"),n.setAttribute("id",t),n.addEventListener("click",(()=>{const t=function(e,t){const n=document.createElement("div");n.classList.add("definition-div"),n.style.position="absolute";const r=Math.min(e.getBoundingClientRect().left+e.offsetWidth+3,window.innerWidth-175);n.style.left=`${r}px`;const a=Math.min(e.getBoundingClientRect().top+25,window.innerHeight-230);n.style.top=`${a}px`,n.style.transform=`translateY(${-n.offsetHeight})`;const o=document.createElement("h4");o.classList.add("word-header"),o.textContent=t.value;const i=document.createElement("div");let c=[];return t.definitions?t.definitions.forEach((t=>{t.definition.split("/").forEach((t=>{const n=function(e,t){const n=document.createElement("div");n.classList.add("definition-item-div");const r=document.createElement("span");r.textContent=`${e.replace(e[0],e[0].toUpperCase())} `;const a=document.createElement("span");return a.textContent="+",a.classList.add("icon"),n.addEventListener("click",(()=>function(e,t){if(t.parentElement.classList.contains("word-container")){const n=O(),[,r]=Array.from(t.parentElement.nextElementSibling.children);if(r.classList.contains("definition-term")&&N(e,r.textContent))return;if(r.classList.contains("definition-term"))return void P(e,r);n.textContent=`(${e})`;const a=M(n,_({value:n.textContent}));t.parentNode.parentNode.insertBefore(a,t.parentNode.nextSibling)}else if(t.nextElementSibling?.classList.contains("definition-term"))N(e,t.nextElementSibling.textContent)||P(e,t.nextElementSibling);else{const n=O();n.textContent=`(${e})`,t.parentNode.insertBefore(n,t.nextSibling)}}(e,t))),n.addEventListener("mouseenter",(()=>a.classList.add("scale-icon"))),n.addEventListener("mouseleave",(()=>a.classList.remove("scale-icon"))),n.append(r,a),n}(t,e);c.push(n)}))})):c.push("(No Definition Available)"),i.append(...c),n.append(o,i),n}(n,e);b=t,document.querySelector("body").appendChild(t)})),n}function _(e){const t=document.createElement("span");return t.classList.add("pinyin-span"),t.textContent=S[e]?.pinyin||" ",t}function M(e,t){const n=document.createElement("span");return n.classList.add("word-container"),n.appendChild(t),n.appendChild(e),n}async function B(e){if(0!==e.length){let t=document.createElement("div");t.classList.add("paragraph-div");const n=await async function(e){const t=await(async e=>{const t=[" ","，","。","、","《","》","！","？","；","：","“","”","（","）","·","—"];return(await c()).segment(e).map((e=>({value:e,type:t.includes(e)?"punct":"word"})))})(e),n=await(async e=>{const{definitionLookup:t}=await c();return e.map((e=>"punct"===e.type?e:{...e,definitions:t(e.value,"s")}))})(t);return await(async e=>{const{pinyin:t}=await i.e(392).then(i.bind(i,392));e.forEach((e=>{"punct"!==e.type&&(S[e.value]={pinyin:t(e.value,{removeNonZh:!0})})}))})(t),n}(e);return C.push(n),function(e,t){return e.forEach((e=>{if("word"===e.type){const n=T(e,0);t.appendChild(n)}else{const n=function(e){const t=document.createElement("div");return t.classList.add("punct-span"),t.textContent=e,t}(e.value);t.appendChild(n)}})),t}(n,t)}}f.addEventListener("click",(async e=>{e.preventDefault(),0!==p.value.length&&(A&&(h.classList.replace("none-display","inline-block-display"),(await c()).start()),L.checked=!1,w.checked=!1,C=[],g.textContent="",E.textContent="",function(){const e=p.value.split("\n").filter((e=>e.length>0)).map((e=>B(e)));Promise.all(e).then((e=>{E.append(...e),g.appendChild(E)}))}(),function(){if(!A)return;const e=document.createElement("div");e.classList.add("click-hint-container");const t=document.createElement("div");t.classList.add("click-image-container");const n=document.createElement("img");n.src="./click.svg",t.append(n),e.append(t);const r=document.createElement("div");r.classList.add("hint-text-container");const a=document.createElement("p");a.textContent="Click a word to view its meanings",r.append(a),e.append(r),E.append(e),setTimeout((()=>{e.remove()}),3e3),A=!1}(),s.hidden=!0,l.classList.replace("none-display","flex-display-column"),f.classList.replace("flex-display-row","none-display"),y.classList.replace("none-display","flex-display-row"))})),u.addEventListener("click",(e=>{e.preventDefault(),s.hidden=!1,l.classList.replace("flex-display-column","none-display"),h.classList.replace("inline-block-display","none-display"),f.classList.replace("none-display","flex-display-row"),y.classList.replace("flex-display-row","none-display")})),p.addEventListener("input",(e=>{let{value:t}=e.target;0===t.length?(m.textContent="0",v.hidden=!0):(m.textContent=t.length,v.hidden=!1)})),d.addEventListener("click",(e=>{e.preventDefault(),p.value="",m.textContent="0"}));const D=()=>{L.checked?Array.from(E.children).forEach(((e,t)=>{!function(e){const t=Array.from(e.children);e.textContent="";const n=t.map((e=>{let t;return t=e.classList.contains("definition-term")?_({value:e.textContent}):_(e.innerHTML),M(e,t)}));e.append(...n)}(e)})):Array.from(E.children).forEach((e=>function(e){const t=Array.from(e.children);e.textContent="";const n=t.map((e=>e.children[1]));return e.append(...n),e}(e)))};L.addEventListener("click",D),k.addEventListener("keypress",(e=>{"Enter"===e.key&&(L.checked=!L.checked,D())}));const H=()=>{w.checked?Array.from(E.children).forEach((e=>function(e){const t=Array.from(e.children);let n;e.textContent="",n=t[0].classList.contains("word-container")?t.map((e=>e.children[1].classList.contains("word-span")?(e.children[1].classList.replace("no-background-span",`background${j()}-span`),M(e.lastElementChild,e.firstElementChild)):e)):t.map((e=>(e.classList.contains("word-span")&&e.classList.replace("no-background-span",`background${j()}-span`),e))),e.append(...n)}(e))):Array.from(E.children).forEach((e=>function(e){const t=Array.from(e.children);let n;e.textContent="",n=t[0].classList.contains("word-container")?t.map((e=>{if(e.children[1].classList.contains("word-span")){[0,1,2,3,4].forEach((t=>{e.children[1].classList.remove(`background${t}-span`)})),e.children[1].classList.add("no-background-span");const[t,n]=Array.from(e.children);return M(n,t)}return e})):t.map((e=>(e.classList.contains("word-span")&&([0,1,2,3,4].forEach((t=>{e.classList.remove(`background${t}-span`)})),e.classList.add("no-background-span")),e))),e.append(...n)}(e)))};w.addEventListener("click",H),x.addEventListener("keypress",(e=>{"Enter"===e.key&&(w.checked=!w.checked,H())})),y.addEventListener("click",(function(){F("no-background-span","white-background-span"),html2pdf().set({pagebreak:{avoid:"span"},margin:1,filename:"mandarin-text.pdf",image:{type:"jpeg",quality:.98},html2canvas:{scale:2},jsPDF:{unit:"in",format:"letter",orientation:"portrait"}}).from(E).save(),setTimeout((()=>{F("white-background-span","no-background-span")}),0)}));const F=(e,t)=>{w.checked||E.querySelectorAll(`.${e}`).forEach((n=>{n.classList.replace(e,t)}))};window.addEventListener("mouseup",(function(e){b&&e.target!==b&&e.target.parentNode!==b&&e.target.parentNode.parentNode!==b&&e.target.parentNode.parentNode?.parentNode!==b&&b.remove()}))})();
//# sourceMappingURL=main.js.map